<main> 
    <div style="display: none;">
        <img  src='/front_end/static/imgs/character_sheets/ryan/left0.png'>
        <img  src='/front_end/static/imgs/character_sheets/ryan/left1.png'>
        <img  src='/front_end/static/imgs/character_sheets/ryan/left2.png'>
        <img  src='/front_end/static/imgs/character_sheets/ryan/right0.png'>
        <img  src='/front_end/static/imgs/character_sheets/ryan/right1.png'>        
        <img  src='/front_end/static/imgs/character_sheets/ryan/right2.png'>
        <img  src='/front_end/static/imgs/character_sheets/ryan/down0.png'>
        <img  src='/front_end/static/imgs/character_sheets/ryan/down1.png'>
        <img  src='/front_end/static/imgs/character_sheets/ryan/down2.png'>
        <img  src='/front_end/static/imgs/character_sheets/ryan/up0.png'>
        <img  src='/front_end/static/imgs/character_sheets/ryan/up1.png'>
        <img  src='/front_end/static/imgs/character_sheets/ryan/up2.png'>
        <img  src='/front_end/static/imgs/character_sheets/justice/right0.png'>
        <img  src='/front_end/static/imgs/character_sheets/justice/right1.png'>
        <img  src='/front_end/static/imgs/character_sheets/justice/right2.png'>
        <img  src='/front_end/static/imgs/character_sheets/chef/right0.png'>
        <img  src='/front_end/static/imgs/character_sheets/chef/right1.png'>
        <img  src='/front_end/static/imgs/character_sheets/chef/right2.png'>
    </div>
    <div class="border_left"></div>
    <div class="border_right"></div>
    <div class="center">
        <div class="textbox godfoot4">
            <p>While Magic Rat and Niko took out the Sheriff, Chef and 
                Justice guy had Ron to intend to...
            </p>
        </div>
        <hr class="narration_break">
        <div class="textbox ryan">
            <p>HAULGUUUU RRRUP KIKI!</p>
        </div>
        <div class="textbox justice">
            <p>I can hear that freak a mile away! So why can't we find him!?</p>
        </div>
        <div class="textbox chef">
            <p>I CANT EXPLAIN IT EITHER.</p>
        </div>
        <div class="animation_box" id="sneak"></div>
        <div class="textbox justice">
            <p>Damn it! How can he just sneak up on us like that?</p>
        </div>
        <div class="textbox chef">
            <p>WAIT I"VE GOT AN IDEA.</p>
        </div>
        <div class="textbox justice">
            <p>Good idea Chef! If we just stand back to back he can't sneak up on us.</p>
        </div>
        <div class="textbox chef">
            <p>LETS TRY IT OUT.</p>
        </div>
        <div class="animation_box" id="air_force"></div>
        <div class="textbox ryan">
            <p>Kuuuurrp Kek Kooog!</p>
        </div>
        <div class="textbox justice">
            <p>Ugg! Everything we do and everything we try, it just never works out!</p>
        </div>
        <div class="textbox chef">
            <p>WAIT I HAVE ANOTHER IDEA THIS IS IT THE IDEA HERE IT IS</p>
        </div>
        <div class="textbox justice">
            <p>Wait a sec, you might be on to something. 
                Ron just acts on violent impulse. 
                So maybe we don't need to defeat him, just distract him! </p>
        </div>
        <div class="textbox justice">
            <p>Hey Ron! Go attack that independent reform minded doctor over there!</p>
        </div>
        <div class="textbox knute">
            <p>Who me?</p>
        </div>
        <div class="animation_box" id="knute"></div>
        <div class="textbox knute">
            <p>NO PLEASE! I'M WILLING TO CROSS PARTY LINES!<p>
        </div>
        <div class="textbox ryan">
            <p>REEEEEEEEEEE!</p>
        </div>
        <div class="textbox justice">
            <p>Yes! We beat Ron.. more or less.</p>
        </div>
        <page_controls></page_controls>
    </div>
</main>

<style>
    .animation_box{
        background-image: url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fimages.fineartamerica.com%2Fimages-medium-large-5%2Fsan-francisco-red-brick-building-brian-orlovich.jpg&f=1&nofb=1");
        background-size: 100% 100%;
    }
    .exclimation{
        position: absolute;
        color: red;
        font-size: 3vw;
        bottom: 2%;
        display: none;
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded",sneak)
    document.addEventListener("DOMContentLoaded",airForce)
    document.addEventListener("DOMContentLoaded",knute)

    function sneak(){
        let canvas = document.getElementById("sneak")
        let ron = createCharacterImg("/front_end/static/imgs/character_sheets/ryan/up1.png")
        let chef = createCharacterImg("/front_end/static/imgs/character_sheets/chef/right1.png")
        let justice = createCharacterImg("/front_end/static/imgs/character_sheets/justice/right1.png")
        let exclimation1 = document.createElement("h2")
        exclimation1.setAttribute("class","exclimation")
        exclimation1.innerText = "!"
        let exclimation2 = exclimation1.cloneNode()
        exclimation2.innerText = "!"
        exclimation1.style.left = "61%"
        exclimation2.style.left = "66%"
        ron.style.bottom = "-70%"
        canvas.appendChild(ron)
        canvas.appendChild(chef)
        canvas.appendChild(justice)
        canvas.appendChild(exclimation1)
        canvas.appendChild(exclimation2)
        let i = 0
        setInterval(()=>{
            if(i<60){
                chef.src = `/front_end/static/imgs/character_sheets/chef/right${i%3}.png`
                justice.src = `/front_end/static/imgs/character_sheets/justice/right${Math.floor(i/1.5)%3}.png`
                chef.style.left = `${0+i}%`
                justice.style.left = `${5+i}%`
                chef.style.bottom = `0%`
                justice.style.bottom = `0%`
                chef.style.transform = `rotate(0deg)`
                justice.style.transform = `rotate(0deg)`
                if(i>20 && i<40){
                    ron.style.left = "10%"
                    ron.src = `/front_end/static/imgs/character_sheets/ryan/up${i%3}.png`
                    ron.style.bottom = `${(i-20)*10-70}%`
                }else if(i>50){
                    ron.style.left = `${100-(i-50)*2}%`
                    ron.src = `/front_end/static/imgs/character_sheets/ryan/left1.png`
                    ron.style.bottom = `0%`
                }
            }else if(i<70){
                exclimation1.style.display = "inline"
                exclimation2.style.display = "inline"
                ron.src = `/front_end/static/imgs/character_sheets/ryan/left2.png`
                chef.src = `/front_end/static/imgs/character_sheets/chef/right1.png`
                justice.src = `/front_end/static/imgs/character_sheets/justice/right1.png`
                ron.style.bottom = `${((i-60)*16-(Math.floor((i-60)/6)*(32*(i-60)-160)))}%`
                ron.style.left = `${80-2*(i-60)}%`
                if(i>64){
                    exclimation1.style.display = "none"
                    exclimation2.style.display = "none"
                    chef.style.transform = `rotate(${-(i-64)*18}deg)`
                    chef.style.bottom = `${-(i-64)*8}%`
                    justice.style.transform = `rotate(${-(i-64)*18}deg)`
                    justice.style.bottom = `${-(i-64)*8}%`
                }
            }else if(i<80){
                ron.style.bottom = `${((i-70)*16-(Math.floor((i-70)/5)*(32*(i-70)-160)))}%`
                ron.style.left = `${60-2*(i-70)}%`
            }else if(i<90){
                ron.style.bottom = `${((i-80)*16-(Math.floor((i-80)/5)*(32*(i-80)-160)))}%`
                ron.style.left = `${40-2*(i-80)}%`
            }else if(i<120){
                ron.style.bottom = "0%"
                ron.src = `/front_end/static/imgs/character_sheets/ryan/down${i%3}.png`
            }else if(i<140){
                ron.src = `/front_end/static/imgs/character_sheets/ryan/left${i%3}.png`
                ron.style.left = `${20-2*(i-120)}%`
            }else i =0
            i++
        },70)
    }

    function airForce(){
        let canvas = document.getElementById("air_force")
        let ron = createCharacterImg("/front_end/static/imgs/character_sheets/ryan/down1.png")
        let chef = createCharacterImg("/front_end/static/imgs/character_sheets/chef/right1.png")
        let justice = createCharacterImg("/front_end/static/imgs/character_sheets/justice/left1.png")
        canvas.appendChild(ron)
        canvas.appendChild(chef)
        canvas.appendChild(justice)
        let i = 0
        setInterval(()=>{
            if(i<20){
                ron.src = "/front_end/static/imgs/character_sheets/ryan/down1.png"
                chef.style.left = "50%"
                justice.style.left = "45%"
                ron.style.bottom = "200%"
                chef.style.transform = `rotate(0deg)`
                justice.style.transform = `rotate(0deg)`
                chef.style.bottom = `0%`
                justice.style.bottom = `0%`
            }else if(i<26){
                ron.style.left = "48%"
                ron.style.bottom = `${110-(i-20)*20}%`
                chef.style.transform = `rotate(${(i-20)*18}deg)`
                chef.style.bottom = `${-(i-20)*8}%`
                justice.style.transform = `rotate(${-(i-20)*18}deg)`
                justice.style.bottom = `${-(i-20)*8}%`
            }else if(i<35){
                ron.src = "/front_end/static/imgs/character_sheets/ryan/left1.png"
                ron.style.bottom = `${((i-26)*20)}%`
                ron.style.left = `${48-2*(i-26)}%`
            }else i=0

            i++
        },70)
    }

    function knute(){
        let canvas = document.getElementById("knute")
        let ron = createCharacterImg("/front_end/static/imgs/character_sheets/ryan/down1.png")
        let chef = createCharacterImg("/front_end/static/imgs/character_sheets/chef/left1.png")
        let justice = createCharacterImg("/front_end/static/imgs/character_sheets/justice/left1.png")
        let knute = createCharacterImg("/front_end/static/imgs/character_sheets/knute/right1.png")
        canvas.appendChild(ron)
        canvas.appendChild(chef)
        canvas.appendChild(justice)
        canvas.appendChild(knute)
        justice.style.left = "75%"
        chef.style.left = "80%"
        let i = 0
        setInterval(()=>{
            if(i<40){
                ron.style.bottom = "0%"
                ron.style.left = "48%"
                knute.style.left = "15%"
                knute.src = `/front_end/static/imgs/character_sheets/knute/right1.png`
                ron.src = `/front_end/static/imgs/character_sheets/ryan/${Math.floor(i/6)%2==0?"left":"right"}1.png`
            }else if(i<50){
                knute.src = `/front_end/static/imgs/character_sheets/knute/left${i%3}.png`
                ron.style.bottom = `${((i-40)*16-(Math.floor((i-40)/5)*(32*(i-40)-160)))}%`
                ron.style.left = `${48-2*(i-40)}%`
                knute.style.left = `${15-(i-40)}%`
            }else if(i<60){
                knute.src = `/front_end/static/imgs/character_sheets/knute/left${i%3}.png`
                ron.style.bottom = `${((i-50)*16-(Math.floor((i-50)/5)*(32*(i-50)-160)))}%`
                ron.style.left = `${48-2*(i-40)}%`
                knute.style.left = `${15-(i-40)}%`
            }else if(i<70){
                ron.style.bottom = `${((i-60)*16-(Math.floor((i-60)/5)*(32*(i-60)-160)))}%`
                ron.style.left = `${48-2*(i-40)}%`
            }else i=0
            i++
        },70)
    }
</script>